---
layout: post
title: "Notepad++的使用技巧"
author: "Kai"
header-style: text
tags:
  - 工具使用
---

## 写一个正则表达式：匹配http或https开头的url，但是不匹配http或https开头的图片

可以使用以下正则表达式来匹配以 "http" 或 "https" 开头的 URL，但不匹配以这些协议开头的图片：

```regex
(http[s]?)(?!.*\.(?:jpg|jpeg|png|gif|bmp)):\/\/[^\s\/$.?#].[^\s]*
```

这个正则表达式的解释如下：

- `(http[s]?)`: 匹配 "http" 或 "https"，括号内的问号表示 "s" 是可选的
- `(?!.*\.(?:jpg|jpeg|png|gif|bmp))`: 负向前瞻，确保 URL 后面不跟着图片文件的扩展名
- `:\/\/`: 匹配 `://`，表示协议的分隔符
- `[^\s\/$.?#]`: 匹配除了空白字符、斜杠、美元符号、问号和井号之外的任意字符
- `.[^\s]*`: 匹配剩余的 URL 部分，确保没有空白字符

请注意，虽然这个正则表达式可以用来匹配大多数 URL，但由于 URL 的规范相当复杂，有一些特殊情况可能无法覆盖。

## Replace with 文本框中怎么引用通过Find What文本框的正则找到的内容？
在 Notepad++ 的 "Replace with" 文本框中，你可以使用特殊的引用符号来引用通过 "Find what" 文本框的正则表达式找到的内容。通常使用美元符号 `$` 加上数字来引用匹配的内容。例如：

如果你的 "Find what" 是：`(http[s]?)(?!.*\.(?:jpg|jpeg|png|gif|bmp)):\/\/[^\s\/$.?#].[^\s]*$`

那么在 "Replace with" 中，你可以使用 `$0` 来引用整个匹配的内容。例如，将 URL 替换为 `<url>` 可以这样写：`<$0>`
这将把整个匹配的 URL 替换为 `<url>`。如果你的正则表达式有分组，你也可以使用 `$1`、`$2` 等来引用相应的分组。在这个例子中，`$1` 将引用 `(http[s]?)` 匹配的部分。

Replace with 文本框中怎么引用通过Find What文本框的正则找到的内容？
或者，通过 `()` 来包围想要用的字符，然后用 `\1` 来替换字符串，第一个匹配文本。

## NotePad++ 正则表达式替换 高级用法
转自：<http://www.pnotepad.org/docs/search/regular_expressions/>

在我们处理文件时，很多时候会用到查找与替换。当我们想将文件中某一部分替换替换文件中另一部分时，怎么办呢？ 下面正则表达式 给我提供方法。

正则表达式，提供复杂 并且弹性的查找与替换

注意: 不支持多行表达式 (involving \n, \r, etc).
### 1. 基本表达式

| 符号 | 解释 |
| --- | --- |
| `.` | 匹配任意字符，除了新一行(\n)。也就是说 “.”可以匹配 \r ，当文件中同时含有\r and \n时，会引起混乱。要匹配所有的字符，使用\s\S。 |
| `(…)` | 这个匹配一个标签区域. 这个标签可以被访问，通过语法 \1访问第一个标签, \2 访问第二个, 同理 \3 \4 … \9。 这些标签可以用在当前正则表达式中，或则替search和replace中的换字符串。 |
| `\1, \2, etc` | 在替换中代表1到9的标签区域(\1 to \9)。例如, 查找字符串 Fred([1-9])XXX 并替换为字符串 Sam\1YYY的方法，当在文件中找到Fred2XXX的字符串时，会替换为Sam2YYY。注意: 只有9个区域能使用，所以我们在使用时很安全，像\10\2 表示区域1和文本”0”以及区域2。 |
| `[…]` | 表示一个字符集合, 例如 `[abc]`表示任意字符 a, b or c.我们也可以使用范围例如[a-z] 表示所以的小写字母。 |
| `[^…]` | 表示字符补集. 例如, `[^A-Za-z]` 表示任意字符除了字母表。 |
| `^` | 匹配一行的开始(除非在集合中, 如下). |
| `$` | 匹配行尾. |
| `*` | 匹配0或多次, 例如 `Sa*m` 匹配 Sm, Sam, Saam, Saaam 等等. |
| `+` | 匹配1次或多次,例如 `Sa+m` 匹配 Sam, Saam, Saaam 等等. |
| `?` | 匹配0或者1次, 例如 `Sa?m` 匹配 Sm, Sam. |
| `{n}` | 匹配确定的 n 次.例如, `Sa{2}m` 匹配 Saam. |
| `{m,n}` | 匹配至少m次，至多n次(如果n缺失，则任意次数).例如, `Sa{2,3}m` 匹配 Saam or Saaam. `Sa{2,}m` 与 `Saa+m` 相同 |
| `*?, +?, ??, {n,m}?` | 非贪心匹配，匹配第一个有效的匹配，通常 `<.>` 会匹配整个 `content` 字符串 –- 但 `<.?>` 只匹配`''` .这个标记一个标签区域，这些区域可以用语法\1 \2 等访问多个对应1-9区域。 |

### 2. 标记和分组

| 符号 | 解释 |
| --- | --- |
| `(…)` | 一组捕获. 可以通过\1 访问第一个组, \2 访问第二个. |
| `(?:…)` | 非捕获组. |
| `(?=…)` | 非捕获组 – 向前断言. 例如 `(.*)(?=ton)` 表达式，当 遇到’Appleton’字符串时，会匹配为’Apple’. |
| `(?<=…)` | 非捕获组 – 向后断言. 例如 `(?<=sir) (.*)` 表示式，当遇到’sir William’ 字符串时，匹配为’ William’. |
| `(?!…)` | 非捕获组 – 消极的向前断言. 例如 `.(?!e)` 表达式，当遇到’Apple’时，会找到每个字母除了 ‘l’，因为它紧跟着 ‘e’. |
| `(?<!...)` | 非捕获组 – 消极向后断言. 例如 `(?<!sir) (.*)(?=ton)` given 'sir William' will find ' William'
| `(?P<name>...)` | 命名所捕获的组. 提交一个名称到组中供后续使用，例如 `(?PA[^\s]+)\s(?P=first)` 会找到 ‘Apple Apple’. 类似的 `(A[^\s]+)\s\1` 使用组名而不是数字. |
| `(?=name)` | 匹配名为name的组. see `(?P...)` for example. |
| `(?#comment)` | 批注 -- 括号中的内容在匹配时将被忽略。 |

### 3. 特殊符号

| 符号 | 解释 |
| --- | --- |
| `\s` | 匹配空格. 注意，会匹配标记的末尾. 使用 `[[:blank:]]` 来避免匹配新一行。 |
| `\S` | 匹配非空白 |
| `\w` | 匹配单词字符 |
| `\W` | 匹配非单词字符 |
| `\d` | 匹配数字字符 |
| `\D` | 匹配非数字字符 |
| `\b` | 匹配单词边界. `\bW\w+` 找到W开头的单词 |
| `\B` | 匹配非单词边界. `\Be\B+` – 找到位于单子中间的字母’e’ |
| `\<` | 这与使用 Scintilla 的单词定义的单词开头相匹配。 |
| `\>` | 这与使用 Scintilla 的单词定义的单词结尾相匹配。 |
| `\x` | 运行用x来表达可能具有其他意思的字符。例如, [ 用来插入到文本中作为[ 而不是作为字符集的开始. |

### 4. 字符类

| 符号 | 解释 |
| --- | --- |
| `[[:alpha:]]` | 匹配字母字符: `[A-Za-z]` |
| `[[:digit:]]` | 匹配数字字符: `[0-9]` |
| `[[:xdigit:]]` | 匹配16进制字符: `[0-9A-Fa-f]` |
| `[[:alnum:]]` | 匹配字母数字字符: `[0-9A-Za-z]` |
| `[[:lower:]]` | 匹配小写字符: `[a-z]` |
| `[[:upper:]]` | 匹配大写字符: `[A-Z]` |
| `[[:blank:]]` | 匹配空白 (空格 or tab): `[ \t]` |
| `[[:space:]]` | 匹配空白字符: `[ \t\r\n\v\f]` |
| `[[:punct:]]` | 匹配标点字符: `[-!"#$%&'()*+,./:;<=>?@[\]_`` |
| `[[:graph:]]` | 匹配图形字符: `[\x21-\x7E]` |
| `[[:print:]]` | 匹配可打印的字符 (graphical characters and spaces) |
| `[[:cntrl:]]` | 匹配控制字符 |

### 5. 替换操作
使用正则表达式的标记，通过（）来包围想要用的字符，然后用\1 来替换字符串，第一个匹配文本。
例如:

| Text body | Search string | Replace string | Result |
| --- | --- | --- | --- |
| Hi my name is Fred | my name is (.+) | my name is not \1 | Hi my name is not Fred |
| The quick brown fox jumped over the fat lazy dog | brown (.+) jumped over the (.+) | brown \2 jumped over the \1 | The quick brown fat jumped over the fox lazy dog |

### 6. 限制
目前 PN2 对正则表达式的支持是有限的，支持的模式和语法只是 perl 支持的强大表达式的一小部分。最大的限制是正则表达式只能在单行内匹配，不能使用多行正则表达式。作为缺乏多行搜索的解决方法，您可以使用反斜杠表达式。

计划通过使用 PCRE 库（在 PN2 的其他地方使用）来提供文档搜索来改进这种支持。如果您有兴趣提供帮助，请加入 pn-discuss 邮件列表：PN 邮件列表。

### 7. 例子

| Description | Search | Replace |
| --- | --- | --- |
| 删除每行的前导空格 | `^[ \t]*` |  |
| 将 getVariable() 更改为 setVariable() | `get(\w+)\(\)` | `set\1()` |

**分解 URL 以显示参数：**
给定一个 URL，例如`http://www.google.com/search?q=Programmers+Notepad&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a`

| Description | Search | Replace |
| --- | --- | --- |
| 分解 URL 的参数| `.*?[?&](\w+)=([\w-+%.:]+)(.*)$` | `\1: \2\n\3` |

将光标置于行首。单击“查找下一个”按钮，然后重复单击“替换”按钮。请注意，点击“全部替换”将无法正常工作，因为我们要搜索上次替换的结果。

结果是 URL 参数的列表：
- **q**: Programmers+Notepad
- **ie**: utf-8
- **oe**: utf-8
- **aq**: t
- **rls**: org.mozilla:en-US:official
- **client**: firefox-a

### 8. 也可以看看
[反斜杠表达式](http://www.pnotepad.org//search/backslash_expressions/) -- 非常有限的搜索/替换语法，但支持多行搜索。
